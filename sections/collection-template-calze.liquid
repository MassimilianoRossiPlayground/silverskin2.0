{%- assign per_row = section.settings.per_row -%}
{%- assign paginate_by = per_row | times: section.settings.rows_per_page -%}

<!-- {% paginate collection.products by paginate_by %} -->

<div
  id="CollectionSection"
  data-section-id="{{ section.id }}"
  data-section-type="collection-template">

  {%- if section.settings.description_position == 'top' -%}
    {% if collection.description != blank %}
      <div class="rte">
        {{ collection.description }}
      </div>
      <hr class="hr--clear hr--small">
    {% endif %}
  {%- endif -%}

  {%- if section.settings.subcollection_style == 'above' -%}
    {%- include 'subcollections', per_row: section.settings.subcollections_per_row -%}
  {%- endif -%}

  
    <div class="banner-calze__wrap" id="light-run">
      <div class="banner-calze__desc">     
        <img class="main-banner" src="https://via.placeholder.com/850x680" />
        <div class="banner-calze__desc--text">
          <h2><b>LIGHT RUN</b> SOCKS</h2>
          <p>Design studiato per il benessere del tuo piede mentre fai running Lorem ipsum dolor sit amet, consectetur adipisicing
          elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
          exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="banner-calze__desc--bottom">
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>ANTI <br />BACTERICAL</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
        </div>        
      </div>
      <div class="banner-calze__prod">
        <p class="swiper-calze__item-count"><span class="swiperJs-count"></span> ITEM</p>
        <div class="swiper-calze swiper-container " data-scroll-to>
          
          <div class="swiper-wrapper">
            {%- for product in collection.products -%}
              {% if product.tags contains 'Calze' %}
              <!-- 'Light Run' -->
                <div class="swiper-slide">
                  {%- include 'product-grid-item-calze' -%}
                </div>
              {% endif %}
            {%- endfor -%}
          </div>
          <div class="swiper-button-next">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-right"  viewbox="0 0 284.49 498.98">
              <path
                d="M35 498.98a35 35 0 0 1-24.75-59.75l189.74-189.74L10.25 59.75a35.002 35.002 0 0 1 49.5-49.5l214.49 214.49a35 35 0 0 1 0 49.5L59.75 488.73A34.89 34.89 0 0 1 35 498.98z">
              </path>
            </svg>          
          
          </div>
          <div class="swiper-button-prev">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-left"              viewbox="0 0 284.49 498.98">
              <path
                d="M249.49 0a35 35 0 0 1 24.75 59.75L84.49 249.49l189.75 189.74a35.002 35.002 0 1 1-49.5 49.5L10.25 274.24a35 35 0 0 1 0-49.5L224.74 10.25A34.89 34.89 0 0 1 249.49 0z">
              </path>
            </svg>
          
          
          </div>
        </div>
      </div>
    </div>


    <div class="banner-calze__wrap opposite" id="endurance-run">
      
      <div class="banner-calze__prod">
        <p class="swiper-calze__item-count"><span class="swiperJs-count"></span> ITEM</p>
        <div class="swiper-calze swiper-container " data-scroll-to>
    
          <div class="swiper-wrapper">
            {%- for product in collection.products -%}
            {% if product.tags contains 'Calze' %}
            <!-- 'Endurance Run' -->
            <div class="swiper-slide">
              {%- include 'product-grid-item-calze' -%}
            </div>
            {% endif %}
            {%- endfor -%}
          </div>
          <div class="swiper-button-next">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-right"
              viewbox="0 0 284.49 498.98">
              <path
                d="M35 498.98a35 35 0 0 1-24.75-59.75l189.74-189.74L10.25 59.75a35.002 35.002 0 0 1 49.5-49.5l214.49 214.49a35 35 0 0 1 0 49.5L59.75 488.73A34.89 34.89 0 0 1 35 498.98z">
              </path>
            </svg>
    
          </div>
          <div class="swiper-button-prev">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-left"
              viewbox="0 0 284.49 498.98">
              <path
                d="M249.49 0a35 35 0 0 1 24.75 59.75L84.49 249.49l189.75 189.74a35.002 35.002 0 1 1-49.5 49.5L10.25 274.24a35 35 0 0 1 0-49.5L224.74 10.25A34.89 34.89 0 0 1 249.49 0z">
              </path>
            </svg>
    
    
          </div>
        </div>
      </div>
      <div class="banner-calze__desc">
        <img class="main-banner" src="https://via.placeholder.com/850x680" />
        <div class="banner-calze__desc--text">
          <h2><b>ENDURANCE RUN</b> SOCKS</h2>
          <p>Design studiato per il benessere del tuo piede mentre fai running Lorem ipsum dolor sit amet, consectetur
            adipisicing
            elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="banner-calze__desc--bottom">
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>ANTI <br />BACTERICAL</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
        </div>
      </div>
    </div>







    <div class="banner-calze__wrap" id="trekking">
      <div class="banner-calze__desc">
        <img class="main-banner" src="https://via.placeholder.com/850x680" />
        <div class="banner-calze__desc--text">
          <h2><b>TREKKING</b> SOCKS</h2>
          <p>Design studiato per il benessere del tuo piede mentre fai running Lorem ipsum dolor sit amet, consectetur
            adipisicing
            elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="banner-calze__desc--bottom">
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>ANTI <br />BACTERICAL</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
        </div>
      </div>
      <div class="banner-calze__prod">
        <p class="swiper-calze__item-count"><span class="swiperJs-count"></span> ITEM</p>
        <div class="swiper-calze swiper-container " data-scroll-to>
    
          <div class="swiper-wrapper">
            {%- for product in collection.products -%}
            {% if product.tags contains 'Calze' %}
            <!-- Trekking -->
            <div class="swiper-slide">
              {%- include 'product-grid-item-calze' -%}
            </div>
            {% endif %}
            {%- endfor -%}
          </div>
          <div class="swiper-button-next">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-right"
              viewbox="0 0 284.49 498.98">
              <path
                d="M35 498.98a35 35 0 0 1-24.75-59.75l189.74-189.74L10.25 59.75a35.002 35.002 0 0 1 49.5-49.5l214.49 214.49a35 35 0 0 1 0 49.5L59.75 488.73A34.89 34.89 0 0 1 35 498.98z">
              </path>
            </svg>
    
          </div>
          <div class="swiper-button-prev">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-left"
              viewbox="0 0 284.49 498.98">
              <path
                d="M249.49 0a35 35 0 0 1 24.75 59.75L84.49 249.49l189.75 189.74a35.002 35.002 0 1 1-49.5 49.5L10.25 274.24a35 35 0 0 1 0-49.5L224.74 10.25A34.89 34.89 0 0 1 249.49 0z">
              </path>
            </svg>
    
    
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="banner-calze__wrap opposite" id="cycling">
    
      <div class="banner-calze__prod">
        <p class="swiper-calze__item-count"><span class="swiperJs-count"></span> ITEM</p>
        <div class="swiper-calze swiper-container " data-scroll-to>
    
          <div class="swiper-wrapper">
            {%- for product in collection.products -%}
            {% if product.tags contains 'Calze' %}
            <!-- 'Cycling' -->
            <div class="swiper-slide">
              {%- include 'product-grid-item-calze' -%}
            </div>
            {% endif %}
            {%- endfor -%}
          </div>
          <div class="swiper-button-next">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-right"
              viewbox="0 0 284.49 498.98">
              <path
                d="M35 498.98a35 35 0 0 1-24.75-59.75l189.74-189.74L10.25 59.75a35.002 35.002 0 0 1 49.5-49.5l214.49 214.49a35 35 0 0 1 0 49.5L59.75 488.73A34.89 34.89 0 0 1 35 498.98z">
              </path>
            </svg>
    
          </div>
          <div class="swiper-button-prev">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-left"
              viewbox="0 0 284.49 498.98">
              <path
                d="M249.49 0a35 35 0 0 1 24.75 59.75L84.49 249.49l189.75 189.74a35.002 35.002 0 1 1-49.5 49.5L10.25 274.24a35 35 0 0 1 0-49.5L224.74 10.25A34.89 34.89 0 0 1 249.49 0z">
              </path>
            </svg>
    
    
          </div>
        </div>
      </div>
      <div class="banner-calze__desc">
        <img class="main-banner" src="https://via.placeholder.com/850x680" />
        <div class="banner-calze__desc--text">
          <h2><b>CYCLING</b> SOCKS</h2>
          <p>Design studiato per il benessere del tuo piede mentre fai running Lorem ipsum dolor sit amet, consectetur
            adipisicing
            elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
            exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="banner-calze__desc--bottom">
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>ANTI <br />BACTERICAL</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
          <div class="icon-wrap">
            <img src="https://via.placeholder.com/56x56" />
            <span>EXTREME <br />BRATHABILITY</span>
          </div>
        </div>
      </div>
    </div>


  {%- if section.settings.subcollection_style == 'below' -%}
    {%- include 'subcollections', per_row: section.settings.subcollections_per_row -%}
  {%- endif -%}

  {%- if paginate.pages > 1 -%}
    {%- include 'pagination' -%}
  {%- endif -%}

  {%- if section.settings.description_position == 'bottom' -%}
    {% if collection.description != blank %}
      <hr class="hr--clear hr--small">
      <div class="rte">
        {{ collection.description }}
      </div>
      <hr class="hr--clear hr--small">
    {% endif %}
  {%- endif -%}

  {%- if settings.quick_shop_enable -%}
    {%- for product in collection.products -%}
      {%- if product.available -%}
        {%- include 'quick-shop-modal' -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}
</div>

{% endpaginate %}

{% schema %}
  {
    "name": "Collection pages",
    "settings": [
      {
        "type": "select",
        "id": "description_position",
        "label": "Collection description position",
        "default": "top",
        "options": [
          {
            "value": "top",
            "label": "Top"
          },
          {
            "value": "bottom",
            "label": "Bottom"
          }
        ]
      },
      {
        "type": "header",
        "content": "Subcollections"
      },
      {
        "type": "paragraph",
        "content": "Links to collections from your menu will appear here. [Learn more](https://archetypethemes.co/blogs/impulse/how-do-i-create-subcollections)"
      },
      {
        "type": "select",
        "id": "subcollection_style",
        "label": "Subcollection style",
        "default": "above",
        "options": [
          {
            "value": "above",
            "label": "Above products"
          },
          {
            "value": "below",
            "label": "Below products"
          },
          {
            "value": "none",
            "label": "None"
          }
        ]
      },
      {
        "type": "range",
        "id": "subcollections_per_row",
        "label": "Subcollections per row",
        "default": 5,
        "min": 2,
        "max": 5,
        "step": 1
      },
      {
        "type": "header",
        "content": "Products"
      },
      {
        "type": "checkbox",
        "id": "enable_collection_count",
        "label": "Enable collection count",
        "default": true
      },
      {
        "type": "range",
        "id": "per_row",
        "label": "Products per row",
        "default": 4,
        "min": 2,
        "max": 5,
        "step": 1
      },
      {
        "type": "range",
        "id": "rows_per_page",
        "label": "Rows per page",
        "default": 7,
        "min": 3,
        "max": 20,
        "step": 1
      },
      {
        "type": "checkbox",
        "id": "mobile_flush_grid",
        "label": "Flush grid on mobile",
        "default": false
      }
    ]
  }
{% endschema %}

<script>
$(function(){

  //SWIPER - TEMPLATE CALZE
  let swiper_calze = new Swiper('.swiper-calze', {
    // Optional parameters



    // If we need pagination
    pagination: {
      el: '.swiper-pagination',
    },

    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },

    // And if we need scrollbar
    scrollbar: {
      el: '.swiper-scrollbar',
    },
  });


  swiper_calze.forEach(element => {
      console.log( element.slides.length, $(element.$el[0]), $(element.$el[0]).parents(".banner-calze__prod").find(".swiperJs-count"))

      $(element.$el[0]).parents(".banner-calze__prod").find(".swiperJs-count").html(element.slides.length)
  });

})

</script>